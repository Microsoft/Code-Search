[2019-04-12T17:57:17Z][Info] === Start Repair-Search ===
[2019-04-12T17:57:18Z][Info] ======================================================================================
[2019-04-12T17:57:18Z][Info] Executing analyzer [Test-SqlHealth]...

[2019-04-12T17:57:18Z][Info] Verifying IsSearchConfigured setting in Configuration DB...
[2019-04-12T17:57:18Z][Info] Verifying Search URL settings in Configuration DB...
[2019-04-12T17:57:18Z][Info] Verifying Code search extension is installed...
[2019-04-12T17:57:18Z][Info] Verifying primary indexing feature flags...
[2019-04-12T17:57:18Z][Info] Verifying Collection IU properties' Index and Query URL match the configuration DB connection URL...
[2019-04-12T17:57:18Z][Info] Verifying Collection IU properties' ES ContractTypes for Indexing and Query...
[2019-04-12T17:57:18Z][Info] No issues found!
[2019-04-12T17:57:18Z][Info] ======================================================================================
[2019-04-12T17:57:18Z][Info] Executing analyzer [Test-ElasticsearchHealth]...

[2019-04-12T17:57:18Z][Info] Elasticsearch cluster health is [@{cluster_name=TFS_Search_BSARKAR; status=red; timed_out=False; number_of_nodes=1; number_of_data_nodes=1; active_primary_shards=134; active_shards=134; relocating_shards=0; initializing_shards=4; unassigned_shards=30; delayed_unassigned_shards=0; number_of_pending_tasks=6; number_of_in_flight_fetch=0; task_max_waiting_in_queue_millis=314; active_shards_percent_as_number=79.76190476190477}].
[2019-04-12T17:57:18Z][Error] Elasticsearch cluster state is [red].
[2019-04-12T17:57:18Z][Warn] Actions recommended are [Request-FixElasticsearchClusterState].
[2019-04-12T17:57:18Z][Info] ======================================================================================
[2019-04-12T17:57:18Z][Warn] Analysis is complete. Final list of recommended actions = [Request-FixElasticsearchClusterState].
[2019-04-12T17:57:18Z][Info] ======================================================================================
[2019-04-12T17:57:18Z][Info] Executing action [Request-FixElasticsearchClusterState]...
[2019-04-12T17:57:18Z][Warn] [MANUAL ACTION REQUIRED] Analyse the cluster allocation explanation respose below and try to mitigate the problem. Sometimes this state can be temporary so execute Repair-Search again. If you are unable to fix the cluster state, contact support.
{
    "index":  "projectrepo_projectrepocontract_1421_shared_ec13a134-8c0f-489f-90d6-634981fce90d",
    "shard":  3,
    "primary":  true,
    "current_state":  "unassigned",
    "unassigned_info":  {
                            "reason":  "CLUSTER_RECOVERED",
                            "at":  "2019-04-12T17:57:04.103Z",
                            "last_allocation_status":  "throttled"
                        },
    "can_allocate":  "throttled",
    "allocate_explanation":  "allocation temporarily throttled",
    "node_allocation_decisions":  [
                                      {
                                          "node_id":  "MJsynAoYTveXKcpaFSKplg",
                                          "node_name":  "BSARKAR",
                                          "transport_address":  "127.0.0.1:9300",
                                          "node_decision":  "throttled",
                                          "store":  {
                                                        "in_sync":  true,
                                                        "allocation_id":  "qbTHgdb7Qy-9i5atKZfGpQ"
                                                    },
                                          "deciders":  [
                                                           {
                                                               "decider":  "throttling",
                                                               "decision":  "THROTTLE",
                                                               "explanation":  "reached the limit of ongoing initial primary recoveries [4], cluster setting [cluster.routing.allocation.node_initial_primaries_recoveries=4]"
                                                           }
                                                       ]
                                      }
                                  ]
}
